# C++ 运算符重载与类型转换总结

## 一、运算符重载的概念与限制  
- 允许为 `class` 类型重载内置运算符，不能创建新运算符。  
- 不能改变运算符的优先级、结合性或操作数个数。  
- 函数名必须为 `operator@`（@ 为运算符符号）。  
- 可重载为全局函数或成员函数；某些运算符（如 `=`、`[]`、`()`、`->`）只能重载为成员函数。  
- 全局函数需访问私有成员时，应声明为类的友元。

---

## 二、运算符重载函数的参数与返回类型  
- **全局函数**：参数个数等于运算符操作数个数。  
- **成员函数**：隐含 `this` 指针作为左操作数，参数个数比操作数少一个。  
- 通常需要返回值；若结果为当前对象本身，应返回对象的引用。

---

## 三、具有赋值性质的运算符重载  
- 若未定义赋值运算符，编译器生成默认版本（按成员赋值）。  
- 类包含指针且不应共享目标时，需自定义赋值运算符与拷贝构造函数。  
- 赋值运算符中应先检查自赋值情况。  
- `++` 和 `--` 前缀为一元运算符，后缀为二元运算符（后缀第二个操作数为整型，编译器自动置 0）。  
- 赋值、复合赋值、自增自减（前缀）建议重载为成员函数，并返回当前对象的引用。

---

## 四、输入输出运算符重载  
- 必须重载为全局函数（因左操作数为 `istream/ostream` 对象）。  
- 第一个参数为 `istream/ostream` 的非常量引用。  
- 通常声明为类的友元以访问私有成员。  
- 输入运算符的第二个参数不能为 `const`。

---

## 五、自定义类型转换  
- **从内置类型转为类类型**：通过构造函数实现（如 `Rational r = 2` 调用构造函数）。  
- **从类类型转为其他类型**：需定义类型转换运算符函数，原型为：  
  ```cpp
  operator 目标类型名() const
  ```
  无参数和返回类型声明，但函数体内需返回目标类型的对象。

---

